<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Mapiator</title>
    <link href="stylesheets/screen.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/syntax.css" media="screen" rel="stylesheet" type="text/css" />
    <!-- <link href="http://feeds2.feedburner.com/invoicing" rel="alternate" title="Ruby Invoicing Framework" type="application/atom+xml" /> -->
</head>

<body>
    <a href="http://github.com/pdietrich/mapiator"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

    <div id="container">
    <h1 id='welcome_to_mapiator'>Welcome to Mapiator</h1>

<h2 id='what_is_mapiator'>What is Mapiator?</h2>

<p>Mapiator is a online mapping application like <a href='http://maps.google.com'>Google Maps</a> or <a href='http://openlayers.org'>Openlayers</a>. You can use it without any charge.</p>

<p>It was created by Patrick Dietrich in February 2009.</p>

<p>Test it:</p>
<div id='map' style='width:660px; height:300px; position:relative; margin-left:50px;'>
</div>
<h2 id='how_can_i_use_mapiator_in_my_site_or_web_application'>How can I use Mapiator in my site or web application?</h2>

<p>In your page add a div element to contain the map:</p>
<div class='highlight'><pre><span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;Mapiator.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
...
<span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;map&quot;</span> <span class='na'>style=</span><span class='s'>&quot;width:400px; height:300px; position:relative&quot;</span><span class='nt'>&gt;&lt;/div&gt;</span>
</pre></div>
<p>Then in your javascript do:</p>
<div class='highlight'><pre><span class='k'>var</span> <span class='nx'>map</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Mapiator</span><span class='p'>.</span><span class='nx'>Map</span><span class='p'>(</span><span class='s1'>&#39;map&#39;</span><span class='p'>);</span>
<span class='nx'>map</span><span class='p'>.</span><span class='nx'>setZoomLevel</span><span class='p'>(</span> <span class='mi'>6</span> <span class='p'>);</span>
<span class='nx'>map</span><span class='p'>.</span><span class='nx'>setCenter</span><span class='p'>(</span><span class='mf'>48.0</span><span class='o'>,</span> <span class='mf'>10.0</span><span class='p'>);</span> <span class='c'>// latitude, longitude</span>
<span class='nx'>map</span><span class='p'>.</span><span class='nx'>redraw</span><span class='p'>();</span>
</pre></div>
<p>That&#8217;s what you need to set it up.</p>

<h2 id='what_are_mapiators_main_featues'>What are Mapiator&#8217;s main featues?</h2>

<ul>
<li>it can be used with a wide range of different map tiles, e.g. with <a href='http://www.openstreetmap.org/'>Open Street Map</a></li>

<li>it can be moved around with the mouse (panning, except for IE6) and zoomed in and out</li>

<li>it can draw your paths and polygons (currently not in IE, yet)</li>

<li>you can attach any DOM element to a fixed geo position (latitute and longitude) on the map (e.g. to add a marker)</li>

<li>it has a clean and simple JavaScript API</li>

<li>it is very small (only about 500 lines of JavaScript code)</li>

<li>it runs on standard conform browsers including inlcuding Firefox, Safari (also on iPhone) and Google Chrome</li>

<li>it can read WKT strings from geo databases like PostGIS to display paths and polygons</li>
</ul>

<h2 id='what_features_are_missing'>What features are missing?</h2>

<ul>
<li>drawing paths and polygons does not work in IE, yet</li>

<li>moving the map with the mouse (panning), does not work in IE6, yet</li>

<li>wrapping the map at the date border is not implemented, yet</li>
</ul>

<h2 id='what_technologies_are_used_for_the_mapiator'>What technologies are used for the Mapiator</h2>

<ul>
<li>paths and polygons are drawn using Canvas tiles (i.e. tiles are built from Canvas elements which can be moved around like map tiles to avoid unnecessary drawing).</li>
</ul>

<h2 id='adding_clickable_elements_to_the_map'>Adding (clickable) elements to the map</h2>

<p>To add a dom element to the map:</p>
<div class='highlight'><pre><span class='k'>var</span> <span class='nx'>element</span> <span class='o'>=</span> <span class='nb'>document</span><span class='p'>.</span><span class='nx'>createElement</span><span class='p'>(</span><span class='s1'>&#39;div&#39;</span><span class='p'>);</span>
<span class='nx'>map</span><span class='p'>.</span><span class='nx'>overlayLayer</span><span class='p'>.</span><span class='nx'>addElement</span><span class='p'>(</span><span class='nx'>element</span><span class='o'>,</span> <span class='mf'>48.0</span><span class='o'>,</span> <span class='mf'>10.0</span><span class='p'>);</span> <span class='c'>// latitude, longitude</span>
</pre></div>
<p>The element will be positioned on the map so that its upper left corner is at the specified geo position. The element may contain other elements. You can style the element with CSS.</p>

<p>Note: The element&#8217;s &#8220;position&#8221; css attribute will be set to absolute and the &#8220;z-index&#8221; will be adjusted by the map.</p>

<p>To make the element clickable use your favorite JavaScript framework or simply do:</p>
<div class='highlight'><pre><span class='nx'>element</span><span class='p'>.</span><span class='nx'>addEventListener</span><span class='p'>(</span><span class='s1'>&#39;click&#39;</span><span class='o'>,</span> <span class='k'>function</span><span class='p'>(</span><span class='nx'>e</span><span class='p'>){</span>
	<span class='nx'>alert</span><span class='p'>(</span><span class='s1'>&#39;Ouch! I have been klicked&#39;</span><span class='p'>);</span>
<span class='p'>});</span>
</pre></div>
<h2 id='drawing_paths_and_polygons'>Drawing paths and polygons</h2>

<p>To draw a path or a polygon from WKT data do:</p>
<div class='highlight'><pre><span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;WKTParser.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</pre></div><div><br /></div><div class='highlight'><pre><span class='k'>var</span> <span class='nx'>path</span> <span class='o'>=</span> <span class='nx'>WKTParser</span><span class='p'>.</span><span class='nx'>parse</span><span class='p'>(</span> <span class='s2'>&quot;LINESTRING (9.0 50.0, 12.0 50.0, 11.5756 48.1371)&quot;</span> <span class='p'>);</span>
<span class='nx'>map</span><span class='p'>.</span><span class='nx'>addElement</span><span class='p'>(</span> <span class='nx'>path</span> <span class='p'>);</span>

<span class='k'>var</span> <span class='nx'>poly</span> <span class='o'>=</span> <span class='nx'>WKTParser</span><span class='p'>.</span><span class='nx'>parse</span><span class='p'>(</span> <span class='s2'>&quot;POLYGON (7 50, 10 50, 9.5756 48.1371)&quot;</span> <span class='p'>);</span>
<span class='nx'>map</span><span class='p'>.</span><span class='nx'>addElement</span><span class='p'>(</span> <span class='nx'>poly</span> <span class='p'>);</span>
</pre></div>
<p>To style your path or polygon do:</p>
<div class='highlight'><pre><span class='nx'>path</span><span class='p'>.</span><span class='nx'>strokeWidth</span> <span class='o'>=</span> <span class='mi'>10</span><span class='o'>;</span> <span class='c'>// pixels</span>
<span class='nx'>path</span><span class='p'>.</span><span class='nx'>strokeStyle</span> <span class='o'>=</span> <span class='s1'>&#39;rgba(0, 100, 0, 0.5)&#39;</span><span class='o'>;</span> <span class='c'>// YES! transparency is supported!</span>

<span class='nx'>poly</span><span class='p'>.</span><span class='nx'>fillStyle</span> <span class='o'>=</span> <span class='s1'>&#39;rgba(0, 0, 100, 0.5)&#39;</span><span class='o'>;</span>
</pre></div><script type='text/javascript' src='javascripts/Mapiator.js'>
</script><script type='text/javascript'>
	var map = new Mapiator.Map('map');
	map.setZoomLevel( 6 );
	map.setCenter(48.0, 10.0); // latitude, longitude
	map.redraw();
</script>
    </div>
</body>
</html>
